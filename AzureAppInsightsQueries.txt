// Query examples for Azure Application Insights

// Basic query
traces 
	| extend component = tostring(extract("Component: ([^:\\/\\s]+);", 1, message)) 
	| where component == "ChatProxy"
	| limit 10
	
// Query for CloudCE/BuzzPlus log entries
traces
	| extend product = tostring(extract("Product: ([^: .*]+) - Component", 1, message))
	| extend component = tostring(extract("Component: ([^: .*]+);", 1, message))
	| extend componentGuid = tostring(extract("Component: .*;([^: .*]+) -", 1, message))
	| extend sequenceNumber = toint(extract("Sequence: ([^: .*]+) -", 1, message))
	| extend module = tostring(extract("Module: ([^: .*]+) -", 1, message))
	| extend innerMessage = tostring(extract("Message: ([^:.*]+) - Parameters", 1, message))
	| extend parameters = tostring(extract("Parameters: ([^.*]+)", 1, message))
	| where module contains "Buzz"
	| sort by timestamp desc | sort by sequenceNumber desc | take 100

// Get first 10 by order
top 10 by sequenceNumber desc

// Get first 10 by order (ineffective)
| sort by sequenceNumber desc | take 10
